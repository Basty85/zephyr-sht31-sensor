# Verwende ein leichtes Ubuntu
FROM ubuntu:22.04

# Setze noninteractive f√ºr apt
ENV DEBIAN_FRONTEND=noninteractive

# Installiere Basis-Pakete
RUN apt-get update && apt-get install -y \
    git \
    python3 \
    python3-venv \
    python3-pip \
    curl \
    build-essential \
    cmake \
    ninja-build \
    gperf \
    ccache \
    dfu-util \
    device-tree-compiler \
    wget \
    unzip \
    && rm -rf /var/lib/apt/lists/*

# Arbeitsverzeichnis setzen
WORKDIR /home/zephyr

# Clone dein Projekt
RUN git clone https://github.com/Basty85/zephyr-sht31-sensor

# Python virtual environment erstellen und aktivieren
RUN python3 -m venv /home/zephyr/.venv
ENV PATH="/home/zephyr/.venv/bin:$PATH"

# West installieren
RUN pip install --upgrade pip
RUN pip install west

# Zephyr Workspace initialisieren
WORKDIR /home/zephyr/zephyr-sht31-sensor
RUN west init -l /home/zephyr/zephyr-sht31-sensor
RUN west update
RUN west packages pip --install

# Standard-Arbeitsverzeichnis
WORKDIR /home/zephyr/zephyr-sht31-sensor

# Default shell
CMD ["/bin/bash"]
